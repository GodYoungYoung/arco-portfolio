import{a as v}from"./dict-DHz__nwp.js";import{k as m,fs as F,S as M,r as n,o as R,h as K,w as u,d as t,e as N,K as O,M as P}from"./index-oR0mlNqp.js";const z={__name:"edit-data",emits:["success"],setup(S,{expose:_,emit:b}){const V=b,f=m(),c=m(""),i=m(!1),p=m(!1);let k=F(()=>"字典数据"+(c.value=="add"?"-新增":"-编辑"));const a=M({id:"",type_id:null,code:"",label:"",value:"",status:1,sort:100,remark:""}),w={label:[{required:!0,message:"字典标签不能为空"}],value:[{required:!0,message:"字典键值不能为空"}]},y=async(s="add")=>{c.value=s,i.value=!0,f.value.resetFields(),await g()},g=async()=>{},D=async s=>{for(const e in a)s[e]!=null&&s[e]!=null&&(a[e]=s[e])},x=async s=>{var d;if(!await((d=f.value)==null?void 0:d.validate())){p.value=!0;let o={...a},r={};c.value==="add"?(o.id=void 0,r=await v.saveDictData(o)):r=await v.updateDictData(o.id,o),r.code===200&&(P.success("操作成功"),V("success"),s(!0)),setTimeout(()=>{p.value=!1},500)}s(!1)},U=()=>i.value=!1;return _({open:y,setFormData:D}),(s,e)=>{const d=n("a-input"),o=n("a-form-item"),r=n("a-input-number"),C=n("sa-radio"),B=n("a-textarea"),q=n("a-form");return R(),K(O("a-modal"),{visible:i.value,"onUpdate:visible":e[5]||(e[5]=l=>i.value=l),width:600,title:N(k),"mask-closable":!1,"ok-loading":p.value,onCancel:U,onBeforeOk:x},{default:u(()=>[t(q,{ref_key:"formRef",ref:f,model:a,rules:w,"auto-label-width":!0},{default:u(()=>[t(o,{label:"字典标签",field:"label"},{default:u(()=>[t(d,{modelValue:a.label,"onUpdate:modelValue":e[0]||(e[0]=l=>a.label=l),placeholder:"请输入字典标签"},null,8,["modelValue"])]),_:1}),t(o,{label:"字典键值",field:"value"},{default:u(()=>[t(d,{modelValue:a.value,"onUpdate:modelValue":e[1]||(e[1]=l=>a.value=l),placeholder:"请输入字典键值"},null,8,["modelValue"])]),_:1}),t(o,{label:"排序",field:"sort"},{default:u(()=>[t(r,{modelValue:a.sort,"onUpdate:modelValue":e[2]||(e[2]=l=>a.sort=l),placeholder:"请输入排序"},null,8,["modelValue"])]),_:1}),t(o,{label:"状态",field:"status"},{default:u(()=>[t(C,{modelValue:a.status,"onUpdate:modelValue":e[3]||(e[3]=l=>a.status=l),dict:"data_status",placeholder:"请选择状态"},null,8,["modelValue"])]),_:1}),t(o,{label:"备注",field:"remark"},{default:u(()=>[t(B,{modelValue:a.remark,"onUpdate:modelValue":e[4]||(e[4]=l=>a.remark=l),placeholder:"请输入备注"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},40,["visible","title","ok-loading"])}}};export{z as default};
