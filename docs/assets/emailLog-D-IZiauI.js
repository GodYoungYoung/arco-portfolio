import{fn as f,_ as L,k as m,S as v,M as F,A as M,r as s,o as _,c as N,d as e,w as a,h,f as w,i as V}from"./index-oR0mlNqp.js";const b={getPageList(c={}){return f({url:"/core/email/index",method:"get",params:c})},delete(c){return f({url:"/core/email/destroy",method:"delete",data:c})}},P={class:"ma-content-block"},S={__name:"emailLog",setup(c){const i=m(),g=m([{label:"成功",value:"success"},{label:"失败",value:"failure"}]),l=m({from:"",email:"",code:"",status:"",create_time:[],orderBy:"create_time",orderType:"desc"}),x=v({api:b.getPageList,rowSelection:{showCheckedAll:!0},operationColumnWidth:100,delete:{show:!0,auth:["/core/email/destroy"],func:async d=>{var n;(await b.delete(d)).code===200&&(F.success("删除成功！"),(n=i.value)==null||n.refresh())}}}),y=v([{title:"服务Host",dataIndex:"gateway",width:120},{title:"发件人",dataIndex:"from",width:180},{title:"收件人",dataIndex:"email",width:180},{title:"验证码",dataIndex:"code",width:100},{title:"状态",dataIndex:"status",width:100},{title:"发送结果",dataIndex:"response",width:180},{title:"发送时间",dataIndex:"create_time",width:180}]),k=async()=>{},I=async()=>{var d;(d=i.value)==null||d.refresh()};return M(async()=>{k(),I()}),(d,o)=>{const n=s("a-input"),r=s("a-form-item"),u=s("a-col"),C=s("a-select"),U=s("a-range-picker"),p=s("a-tag"),B=s("sa-table");return _(),N("div",P,[e(B,{ref_key:"crudRef",ref:i,options:x,columns:y,searchForm:l.value},{tableSearch:a(()=>[e(u,{span:8},{default:a(()=>[e(r,{field:"from",label:"发件人"},{default:a(()=>[e(n,{modelValue:l.value.from,"onUpdate:modelValue":o[0]||(o[0]=t=>l.value.from=t),placeholder:"请输入发件人","allow-clear":""},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:8},{default:a(()=>[e(r,{field:"email",label:"收件人"},{default:a(()=>[e(n,{modelValue:l.value.email,"onUpdate:modelValue":o[1]||(o[1]=t=>l.value.email=t),placeholder:"请输入收件人","allow-clear":""},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:8},{default:a(()=>[e(r,{field:"code",label:"验证码"},{default:a(()=>[e(n,{modelValue:l.value.code,"onUpdate:modelValue":o[2]||(o[2]=t=>l.value.code=t),placeholder:"请输入验证码","allow-clear":""},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:8},{default:a(()=>[e(r,{label:"发送状态",field:"status"},{default:a(()=>[e(C,{modelValue:l.value.status,"onUpdate:modelValue":o[3]||(o[3]=t=>l.value.status=t),"field-names":{label:"label",value:"value"},options:g.value,placeholder:"请选择发送状态","allow-clear":""},null,8,["modelValue","options"])]),_:1})]),_:1}),e(u,{span:16},{default:a(()=>[e(r,{field:"create_time",label:"操作时间"},{default:a(()=>[e(U,{modelValue:l.value.create_time,"onUpdate:modelValue":o[4]||(o[4]=t=>l.value.create_time=t),showTime:"",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),status:a(({record:t})=>[t.status==="success"?(_(),h(p,{key:0,color:"green"},{default:a(()=>[w("成功")]),_:1})):V("",!0),t.status==="failure"?(_(),h(p,{key:1,color:"red"},{default:a(()=>[w("失败")]),_:1})):V("",!0)]),_:1},8,["options","columns","searchForm"])])}}},A=L(S,[["__scopeId","data-v-1f681bbf"]]);export{A as default};
