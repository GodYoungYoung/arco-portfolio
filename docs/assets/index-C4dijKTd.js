import{m as r}from"./menu-DzJnGZEV.js";import B from"./edit-CQE4ukiD.js";import{_ as M,k as f,fs as E,S as y,M as m,A as L,r as c,fu as N,o as h,c as P,d as o,w as n,h as w,K as $,i as x,e as j,L as K,f as T}from"./index-oR0mlNqp.js";const W={class:"ma-content-block lg:flex justify-between"},q={__name:"index",setup(z){const l=f(),d=f(),u=f({name:"",code:"",status:""});let V=E(()=>l.value?l.value.isRecovery:!1);const k=async(t,a)=>{const e=await r.changeStatus({id:a,status:t});e.code===200&&(m.success(e.message),l.value.refresh())},g=t=>{var a,e;(a=d.value)==null||a.open(),(e=d.value)==null||e.setFormData({parent_id:t})},I=y({api:r.getList,recycleApi:r.getRecyclePageList,rowSelection:{showCheckedAll:!0},operationColumnWidth:200,add:{show:!0,auth:["/core/menu/save"],func:async()=>{var t;(t=d.value)==null||t.open()}},edit:{show:!0,auth:["/core/menu/update"],func:async t=>{var a,e;(a=d.value)==null||a.open("edit"),(e=d.value)==null||e.setFormData(t)}},delete:{show:!0,auth:["/core/menu/destroy"],func:async t=>{var e;(await r.delete(t)).code===200&&(m.success("删除成功！"),(e=l.value)==null||e.refresh())},realAuth:["/core/menu/realDestroy"],realFunc:async t=>{var e;(await r.realDestroy(t)).code===200&&(m.success("销毁成功！"),(e=l.value)==null||e.refresh())}},recovery:{show:!0,auth:["/core/menu/recovery"],func:async t=>{var e;(await r.recovery(t)).code===200&&(m.success("恢复成功！"),(e=l.value)==null||e.refresh())}},isExpand:!0}),C=y([{title:"菜单名称",dataIndex:"name",width:180},{title:"菜单类型",dataIndex:"type",dict:"menu_type",width:100},{title:"图标",dataIndex:"icon",width:80},{title:"菜单标识",dataIndex:"code",width:150},{title:"路由地址",dataIndex:"route",width:150},{title:"视图组件",dataIndex:"component",width:200},{title:"排序",dataIndex:"sort",width:80},{title:"隐藏",dataIndex:"is_hidden",dict:"yes_or_no",width:80},{title:"状态",dataIndex:"status",dict:"data_status",width:120},{title:"创建时间",dataIndex:"create_time",width:180}]),b=async()=>{},v=async()=>{var t;(t=l.value)==null||t.refresh()};return L(async()=>{b(),v()}),(t,a)=>{const e=c("a-input"),p=c("a-form-item"),_=c("a-col"),D=c("sa-select"),R=c("sa-switch"),F=c("icon-plus"),S=c("a-link"),A=c("sa-table"),U=N("auth");return h(),P("div",W,[o(A,{ref_key:"crudRef",ref:l,options:I,columns:C,searchForm:u.value},{tableSearch:n(()=>[o(_,{span:8},{default:n(()=>[o(p,{field:"name",label:"菜单名称"},{default:n(()=>[o(e,{modelValue:u.value.name,"onUpdate:modelValue":a[0]||(a[0]=s=>u.value.name=s),placeholder:"请输入菜单名称"},null,8,["modelValue"])]),_:1})]),_:1}),o(_,{span:8},{default:n(()=>[o(p,{field:"code",label:"菜单标识"},{default:n(()=>[o(e,{modelValue:u.value.code,"onUpdate:modelValue":a[1]||(a[1]=s=>u.value.code=s),placeholder:"请输入菜单标识"},null,8,["modelValue"])]),_:1})]),_:1}),o(_,{span:8},{default:n(()=>[o(p,{field:"status",label:"状态"},{default:n(()=>[o(D,{modelValue:u.value.status,"onUpdate:modelValue":a[2]||(a[2]=s=>u.value.status=s),dict:"data_status",placeholder:"请选择状态","allow-clear":""},null,8,["modelValue"])]),_:1})]),_:1})]),icon:n(({record:s})=>[s.icon?(h(),w($(s.icon),{key:0})):x("",!0)]),status:n(({record:s})=>[o(R,{modelValue:s.status,"onUpdate:modelValue":i=>s.status=i,onChange:i=>k(i,s.id)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),operationBeforeExtend:n(({record:s})=>[s.type==="M"&&!j(V)?K((h(),w(S,{key:0,onClick:i=>g(s.id)},{default:n(()=>[o(F),T(" 新增 ")]),_:2},1032,["onClick"])),[[U,["/core/menu/save"]]]):x("",!0)]),_:1},8,["options","columns","searchForm"]),o(B,{ref_key:"editRef",ref:d,onSuccess:v},null,512)])}}},O=M(q,[["__scopeId","data-v-b761c203"]]);export{O as default};
