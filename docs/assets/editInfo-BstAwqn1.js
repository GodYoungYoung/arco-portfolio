import{_ as be,k as p,r as d,o as c,h as k,w as l,f as u,t as U,d as e,i as O,c as q,F as C,g as T,l as h,L as xe,N as Ve,M as L}from"./index-oR0mlNqp.js";import{a as j}from"./generate-Db7nyP4X.js";import{a as ye}from"./dataMaintain-BO0hPD53.js";import{m as ge}from"./menu-DzJnGZEV.js";import{d as we}from"./dict-DHz__nwp.js";import Ue from"./settingComponent-BiI2KsG-.js";const he=[{name:"修改状态",value:"changeStatus",comment:"勾选生成修改状态按钮菜单及接口，该接口用于status字段状态修改"}],ke=[{name:"一对一",value:"hasOne"},{name:"一对多",value:"hasMany"},{name:"一对一（反向)",value:"belongsTo"},{name:"多对多",value:"belongsToMany"}],qe=[{label:"=",value:"eq"},{label:"!=",value:"neq"},{label:">",value:"gt"},{label:">=",value:"gte"},{label:"<",value:"lt"},{label:"<=",value:"lte"},{label:"LIKE",value:"like"},{label:"IN",value:"in"},{label:"NOT IN",value:"notin"},{label:"BETWEEN",value:"between"}],Ce=[{label:"输入框",value:"input"},{label:"密码框",value:"password"},{label:"文本域",value:"textarea"},{label:"数字输入框",value:"inputNumber"},{label:"标签输入框",value:"inputTag"},{label:"开关",value:"switch"},{label:"滑块",value:"slider"},{label:"数据下拉框",value:"select"},{label:"字典下拉框",value:"saSelect"},{label:"树形下拉框",value:"treeSelect"},{label:"单选框",value:"radio"},{label:"复选框",value:"checkbox"},{label:"日期选择器",value:"date"},{label:"时间选择器",value:"time"},{label:"评分器",value:"rate"},{label:"级联选择器",value:"cascader"},{label:"用户选择器",value:"userSelect"},{label:"省市区联动",value:"cityLinkage"},{label:"图片上传",value:"uploadImage"},{label:"文件上传",value:"uploadFile"},{label:"富文本控件",value:"wangEditor"},{label:"代码编辑器",value:"codeEditor"}],Te={key:0},Ie={class:"flex justify-between w-full"},De={class:"flex justify-between w-full"},Se={class:"flex justify-between w-full"},Ne={name:"setting:code:update"},Ee=Object.assign(Ne,{emits:["success"],setup(Ke,{expose:J,emit:Q}){const v=p({}),A=p(!0),R=p(!1),F=p("base_config"),$=p(),X=p(["uploadFile","uploadImage","editor","codeEditor","wangEditor","cityLinkage","date","userInfo"]),o=p({generate_menus:["save","update","read","delete","recycle","recovery","realDestroy","changeStatus"],columns:[]}),P=p(),Y=Q,f=p({relations:[]}),M=p([]);p([]);const W=p([]);p([]),p([]),p([]);const z=p([]),Z=async i=>{R.value=!0;const t=await ye.getDataSource();z.value=t.data.map(r=>({label:r,value:r}));const b=await j.readTable(i);v.value=b.data,oe(),A.value=!1},ee=(i,t)=>{o.value.columns.find((b,r)=>{b.column_name==i&&(o.value.columns[r].options=t)}),L.success("组件设置成功")},le=async i=>{if(o.value.namespace==="saiadmin")return L.error("应用名称不能为saiadmin"),!1;const t=await P.value.validate();if(t){for(let r in t)L.error(t[r].message);return!1}o.value.options=f.value;const b=await j.update(o.value.id,o.value);if(b.code==200)L.success(b.message),Y("success",!0),i(!0);else return!1},I=(i,t)=>o.value.columns.map(b=>{b["is_"+t]=i}),ae=()=>{f.value.relations.push({name:"",type:"hasOne",model:"",foreignKey:"",localKey:"",table:""})},te=i=>f.value.relations.splice(i,1),oe=()=>{for(let i in v.value)i==="generate_menus"?o.value[i]=v.value[i]?v.value[i].split(","):[]:o.value[i]=v.value[i];v.value.options&&v.value.options.relations?f.value.relations=v.value.options.relations:f.value.relations=[],v.value.tpl_category==="tree"&&(f.value.tree_id=v.value.options.tree_id,f.value.tree_name=v.value.options.tree_name,f.value.tree_parent_id=v.value.options.tree_parent_id),j.getTableColumns({table_id:v.value.id}).then(i=>{o.value.columns=[],i.data.map(t=>{t.is_required=t.is_required===2,t.is_insert=t.is_insert===2,t.is_edit=t.is_edit===2,t.is_list=t.is_list===2,t.is_query=t.is_query===2,t.is_sort=t.is_sort===2,o.value.columns.push(t)})}),ge.getList({tree:!0}).then(i=>{M.value=i.data,M.value.unshift({id:0,value:0,label:"顶级菜单"})}),we.getPageList({saiType:"all"}).then(i=>W.value=i.data)};return J({open:Z}),(i,t)=>{const b=d("a-divider"),r=d("a-input"),s=d("a-form-item"),m=d("a-col"),V=d("a-row"),g=d("a-select"),ue=d("a-textarea"),w=d("a-radio"),D=d("a-radio-group"),ne=d("a-cascader"),G=d("a-input-number"),N=d("a-option"),E=d("a-tab-pane"),K=d("a-tag"),B=d("a-alert"),x=d("a-table-column"),y=d("a-checkbox"),S=d("a-tooltip"),H=d("a-link"),de=d("a-space"),se=d("a-table"),me=d("a-checkbox-group"),ie=d("icon-plus"),re=d("a-button"),_e=d("icon-delete"),pe=d("a-tabs"),ce=d("a-form"),fe=d("a-spin"),ve=d("a-modal");return c(),k(ve,{visible:R.value,"onUpdate:visible":t[29]||(t[29]=a=>R.value=a),"on-before-ok":le,fullscreen:"","unmount-on-close":""},{title:l(()=>{var a;return[u("编辑生成信息 - "+U((a=v.value)==null?void 0:a.table_comment),1)]}),default:l(()=>[e(fe,{loading:A.value,tip:"加载数据中...",class:"w-full"},{default:l(()=>[e(ce,{model:o.value,ref_key:"formRef",ref:P},{default:l(()=>[e(pe,{"active-key":F.value,"onUpdate:activeKey":t[28]||(t[28]=a=>F.value=a)},{default:l(()=>[e(E,{title:"配置信息",key:"base_config"},{default:l(()=>[e(b,{orientation:"left"},{default:l(()=>[u("基础信息")]),_:1}),e(V,{gutter:24},{default:l(()=>[e(m,{span:8},{default:l(()=>[e(s,{label:"表名称",field:"table_name","label-col-flex":"auto","label-col-style":{width:"100px"}},{default:l(()=>[e(r,{modelValue:o.value.table_name,"onUpdate:modelValue":t[0]||(t[0]=a=>o.value.table_name=a),disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),e(m,{span:8},{default:l(()=>[e(s,{label:"表描述",field:"table_comment","label-col-flex":"auto","label-col-style":{width:"100px"},rules:[{required:!0,message:"表描述必填"}]},{default:l(()=>[e(r,{modelValue:o.value.table_comment,"onUpdate:modelValue":t[1]||(t[1]=a=>o.value.table_comment=a)},null,8,["modelValue"])]),_:1})]),_:1}),e(m,{span:8},{default:l(()=>[e(s,{label:"实体类",field:"class_name","label-col-flex":"auto","label-col-style":{width:"100px"},rules:[{required:!0,message:"实体类必填"}]},{default:l(()=>[e(r,{modelValue:o.value.class_name,"onUpdate:modelValue":t[2]||(t[2]=a=>o.value.class_name=a)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(V,{gutter:24},{default:l(()=>[e(m,{span:8},{default:l(()=>[e(s,{label:"业务名称",field:"business_name","label-col-flex":"auto","label-col-style":{width:"100px"},rules:[{required:!0,message:"实体别名必填"}]},{default:l(()=>[e(r,{modelValue:o.value.business_name,"onUpdate:modelValue":t[3]||(t[3]=a=>o.value.business_name=a)},null,8,["modelValue"])]),_:1})]),_:1}),e(m,{span:8},{default:l(()=>[e(s,{label:"数据源",field:"source","label-col-flex":"auto","label-col-style":{width:"94px"}},{default:l(()=>[e(g,{placeholder:"请选择数据源",modelValue:o.value.source,"onUpdate:modelValue":t[4]||(t[4]=a=>o.value.source=a),options:z.value},null,8,["modelValue","options"])]),_:1})]),_:1}),e(m,{span:8},{default:l(()=>[e(s,{label:"备注信息",field:"remark","label-col-flex":"auto","label-col-style":{width:"94px"}},{default:l(()=>[e(ue,{modelValue:o.value.remark,"onUpdate:modelValue":t[5]||(t[5]=a=>o.value.remark=a)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(b,{orientation:"left"},{default:l(()=>[u("生成信息")]),_:1}),e(V,{gutter:24},{default:l(()=>[e(m,{xs:24,md:8,xl:8},{default:l(()=>[e(s,{label:"应用类型",field:"template","label-col-flex":"auto","label-col-style":{width:"100px"},rules:[{required:!0,message:"应用类型必选"}],extra:"默认app模板,生成文件放app目录下"},{default:l(()=>[e(g,{style:{width:"100%"},modelValue:o.value.template,"onUpdate:modelValue":t[6]||(t[6]=a=>o.value.template=a),options:[{label:"webman应用[app]",value:"app"},{label:"webman插件[plugin]",value:"plugin"}],"allow-clear":"","allow-search":"",placeholder:"请选择生成模板"},null,8,["modelValue"])]),_:1})]),_:1}),e(m,{xs:24,md:8,xl:8},{default:l(()=>[e(s,{label:"应用名称",field:"namespace","label-col-flex":"auto","label-col-style":{width:"100px"},rules:[{required:!0,message:"应用名称必填"}],extra:"plugin插件名称, 或者app下应用名称, 禁止使用saiadmin"},{default:l(()=>[e(r,{modelValue:o.value.namespace,"onUpdate:modelValue":t[7]||(t[7]=a=>o.value.namespace=a)},null,8,["modelValue"])]),_:1})]),_:1}),e(m,{xs:24,md:8,xl:8},{default:l(()=>[e(s,{label:"包名",field:"package_name","label-col-flex":"auto","label-col-style":{width:"100px"},extra:"指定控制器文件所在控制器目录的二级目录名，如：system"},{default:l(()=>[e(r,{"allow-clear":"",modelValue:o.value.package_name,"onUpdate:modelValue":t[8]||(t[8]=a=>o.value.package_name=a),placeholder:"请输入包名"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(V,{gutter:24},{default:l(()=>[e(m,{xs:24,md:8,xl:8},{default:l(()=>[e(s,{label:"生成模板",field:"stub","label-col-flex":"auto","label-col-style":{width:"100px"},extra:"ApiDoc会生成ApiDoc注释的接口文档"},{default:l(()=>[e(D,{modelValue:o.value.stub,"onUpdate:modelValue":t[9]||(t[9]=a=>o.value.stub=a)},{default:l(()=>[e(w,{value:"saiadmin"},{default:l(()=>[u("默认")]),_:1}),e(w,{value:"apidoc"},{default:l(()=>[u("ApiDoc文档")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(m,{xs:24,md:8,xl:8},{default:l(()=>[e(s,{label:"生成方式",field:"generate_type","label-col-flex":"auto","label-col-style":{width:"100px"},extra:"生成到项目仅调试模式有效，自动生成到前后端目录，自动处理菜单生成"},{default:l(()=>[e(D,{modelValue:o.value.generate_type,"onUpdate:modelValue":t[10]||(t[10]=a=>o.value.generate_type=a)},{default:l(()=>[e(w,{value:1},{default:l(()=>[u("压缩包下载")]),_:1}),e(w,{value:2},{default:l(()=>[u("生成到项目")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),o.value.generate_type==2?(c(),k(m,{key:0,xs:24,md:8,xl:8},{default:l(()=>[e(s,{label:"生成路径",field:"generate_path","label-col-flex":"auto","label-col-style":{width:"100px"},rules:[{required:!0,message:"生成路径必填"}],extra:"前端根目录文件夹名称，必须与后端根目录同级"},{default:l(()=>[e(r,{modelValue:o.value.generate_path,"onUpdate:modelValue":t[11]||(t[11]=a=>o.value.generate_path=a)},null,8,["modelValue"])]),_:1})]),_:1})):O("",!0)]),_:1}),e(V,{gutter:24},{default:l(()=>[e(m,{xs:24,md:8,xl:8},{default:l(()=>[e(s,{label:"生成类型",field:"tpl_category","label-col-flex":"auto","label-col-style":{width:"100px"},extra:"单表须有主键，树表须指定id、parent_id、name等字段"},{default:l(()=>[e(g,{style:{width:"100%"},modelValue:o.value.tpl_category,"onUpdate:modelValue":t[12]||(t[12]=a=>o.value.tpl_category=a),options:[{label:"单表CRUD",value:"single"},{label:"树表CRUD",value:"tree"}],"allow-clear":"","allow-search":"",placeholder:"请选择所属模块"},null,8,["modelValue"])]),_:1})]),_:1}),e(m,{xs:24,md:8,xl:8},{default:l(()=>[e(s,{label:"模型类型",field:"generate_model","label-col-flex":"auto","label-col-style":{width:"100px"},extra:"根据不同选择生成不同的模型"},{default:l(()=>[e(D,{modelValue:o.value.generate_model,"onUpdate:modelValue":t[13]||(t[13]=a=>o.value.generate_model=a)},{default:l(()=>[e(w,{value:1},{default:l(()=>[u("软删除")]),_:1}),e(w,{value:2},{default:l(()=>[u("非软删除")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(V,{gutter:24},{default:l(()=>[e(m,{xs:24,md:8,xl:8},{default:l(()=>[e(s,{label:"所属菜单",field:"belong_menu_id","label-col-flex":"auto","label-col-style":{width:"100px"},extra:"分配业务功能在哪个菜单，例如：权限管理。不选择则为顶级菜单"},{default:l(()=>[e(ne,{modelValue:o.value.belong_menu_id,"onUpdate:modelValue":t[14]||(t[14]=a=>o.value.belong_menu_id=a),options:M.value,"expand-trigger":"hover",style:{width:"100%"},placeholder:"生成功能所属菜单","allow-search":"","allow-clear":"","check-strictly":""},null,8,["modelValue","options"])]),_:1})]),_:1}),e(m,{xs:24,md:8,xl:8},{default:l(()=>[e(s,{label:"菜单名称",field:"menu_name","label-col-flex":"auto","label-col-style":{width:"100px"},rules:[{required:!0,message:"菜单名称必选"}],extra:"显示在左侧菜单上的名称、以及以及代码中的业务名称"},{default:l(()=>[e(r,{"allow-clear":"",modelValue:o.value.menu_name,"onUpdate:modelValue":t[15]||(t[15]=a=>o.value.menu_name=a),placeholder:"请输入菜单名称"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(V,{gutter:24},{default:l(()=>[e(m,{span:8},{default:l(()=>[e(s,{label:"表单样式",field:"component_type","label-col-flex":"auto","label-col-style":{width:"100px"},extra:"设置新增和修改组件显示方式"},{default:l(()=>[e(D,{modelValue:o.value.component_type,"onUpdate:modelValue":t[16]||(t[16]=a=>o.value.component_type=a),type:"button"},{default:l(()=>[e(w,{value:1},{default:l(()=>[u("模态框")]),_:1}),e(w,{value:2},{default:l(()=>[u("抽屉")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(m,{span:8},{default:l(()=>[e(s,{label:"表单宽度",field:"form_width","label-col-flex":"auto","label-col-style":{width:"100px"},extra:"表单组件的宽度，单位为px"},{default:l(()=>[e(G,{modelValue:o.value.form_width,"onUpdate:modelValue":t[17]||(t[17]=a=>o.value.form_width=a),min:200,max:1e4},null,8,["modelValue"])]),_:1})]),_:1}),e(m,{span:8},{default:l(()=>[e(s,{label:"表单全屏",field:"is_full","label-col-flex":"auto","label-col-style":{width:"100px"},extra:"编辑表单是否全屏"},{default:l(()=>[e(D,{modelValue:o.value.is_full,"onUpdate:modelValue":t[18]||(t[18]=a=>o.value.is_full=a)},{default:l(()=>[e(w,{value:1},{default:l(()=>[u("否")]),_:1}),e(w,{value:2},{default:l(()=>[u("是")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),o.value.tpl_category==="tree"?(c(),q("div",Te,[e(b,{orientation:"left"},{default:l(()=>[u("树表配置")]),_:1}),e(V,{gutter:24},{default:l(()=>[e(m,{xs:24,md:8,xl:8},{default:l(()=>[e(s,{label:"树主ID",field:"tree_id","label-col-flex":"auto","label-col-style":{width:"100px"},extra:"指定树表的主要ID，一般为主键"},{default:l(()=>[e(g,{style:{width:"100%"},modelValue:f.value.tree_id,"onUpdate:modelValue":t[19]||(t[19]=a=>f.value.tree_id=a),"allow-clear":"","allow-search":"",placeholder:"请选择树表的主ID"},{default:l(()=>[(c(!0),q(C,null,T(o.value.columns,(a,n)=>(c(),k(N,{class:"w-full",label:a.column_name+" - "+a.column_comment,value:a.column_name,key:n},{default:l(()=>[h("div",Ie,[h("span",null,U(a.column_name),1),h("span",null,U(a.column_comment),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(m,{xs:24,md:8,xl:8},{default:l(()=>[e(s,{label:"树父ID",field:"tree_parent_id","label-col-flex":"auto","label-col-style":{width:"100px"},extra:"指定树表的父ID，比如：parent_id"},{default:l(()=>[e(g,{style:{width:"100%"},modelValue:f.value.tree_parent_id,"onUpdate:modelValue":t[20]||(t[20]=a=>f.value.tree_parent_id=a),"allow-clear":"","allow-search":"",placeholder:"请选择树表的父ID"},{default:l(()=>[(c(!0),q(C,null,T(o.value.columns,(a,n)=>(c(),k(N,{class:"w-full",label:a.column_name+" - "+a.column_comment,value:a.column_name,key:n},{default:l(()=>[h("div",De,[h("span",null,U(a.column_name),1),h("span",null,U(a.column_comment),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(m,{xs:24,md:8,xl:8},{default:l(()=>[e(s,{label:"树名称",field:"tree_name","label-col-flex":"auto","label-col-style":{width:"100px"},extra:"指定树显示的名称字段，比如：name"},{default:l(()=>[e(g,{style:{width:"100%"},modelValue:f.value.tree_name,"onUpdate:modelValue":t[21]||(t[21]=a=>f.value.tree_name=a),"allow-clear":"","allow-search":"",placeholder:"请选择树表的主ID"},{default:l(()=>[(c(!0),q(C,null,T(o.value.columns,(a,n)=>(c(),k(N,{class:"w-full",label:a.column_name+" - "+a.column_comment,value:a.column_name,key:n},{default:l(()=>[h("div",Se,[h("span",null,U(a.column_name),1),h("span",null,U(a.column_comment),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})])):O("",!0)]),_:1}),e(E,{title:"字段配置",key:"field_config"},{default:l(()=>[e(B,{title:"提示"},{default:l(()=>[u(" 使用数组形式字段的组件，请在模型设置 "),e(K,{color:"#168cff"},{default:l(()=>[u("获取器")]),_:1}),u(" 和 "),e(K,{color:"#168cff"},{default:l(()=>[u("修改器")]),_:1})]),_:1}),e(se,{data:o.value.columns,pagination:!1,class:"mt-3"},{columns:l(()=>[e(x,{dataIndex:"sort",title:"排序",width:90},{cell:l(({rowIndex:a})=>[e(G,{modelValue:o.value.columns[a].sort,"onUpdate:modelValue":n=>o.value.columns[a].sort=n},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(x,{dataIndex:"column_name",title:"字段名称",width:150,tooltip:""}),e(x,{dataIndex:"column_comment",title:"字段描述",width:160},{cell:l(({rowIndex:a})=>[e(r,{modelValue:o.value.columns[a].column_comment,"onUpdate:modelValue":n=>o.value.columns[a].column_comment=n,"allow-clear":""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(x,{dataIndex:"column_type",title:"物理类型",width:100}),e(x,{dataIndex:"is_required",title:"必填",width:60},{title:l(()=>[u("必填 "),e(S,{content:"全选 / 全不选",position:"bottom"},{default:l(()=>[e(y,{onChange:t[22]||(t[22]=a=>I(a,"required"))})]),_:1})]),cell:l(({rowIndex:a})=>[e(y,{modelValue:o.value.columns[a].is_required,"onUpdate:modelValue":n=>o.value.columns[a].is_required=n},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(x,{dataIndex:"is_insert",title:"插入",width:60},{title:l(()=>[u("表单 "),e(S,{content:"全选 / 全不选",position:"bottom"},{default:l(()=>[e(y,{onChange:t[23]||(t[23]=a=>I(a,"insert"))})]),_:1})]),cell:l(({rowIndex:a})=>[e(y,{modelValue:o.value.columns[a].is_insert,"onUpdate:modelValue":n=>o.value.columns[a].is_insert=n},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(x,{dataIndex:"is_list",title:"列表",width:60},{title:l(()=>[u("列表 "),e(S,{content:"全选 / 全不选",position:"bottom"},{default:l(()=>[e(y,{onChange:t[24]||(t[24]=a=>I(a,"list"))})]),_:1})]),cell:l(({rowIndex:a})=>[e(y,{modelValue:o.value.columns[a].is_list,"onUpdate:modelValue":n=>o.value.columns[a].is_list=n},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(x,{dataIndex:"is_query",title:"查询",width:60},{title:l(()=>[u("查询 "),e(S,{content:"全选 / 全不选",position:"bottom"},{default:l(()=>[e(y,{onChange:t[25]||(t[25]=a=>I(a,"query"))})]),_:1})]),cell:l(({rowIndex:a})=>[e(y,{modelValue:o.value.columns[a].is_query,"onUpdate:modelValue":n=>o.value.columns[a].is_query=n},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(x,{dataIndex:"is_sort",title:"排序",width:60},{title:l(()=>[u("排序 "),e(S,{content:"全选 / 全不选",position:"bottom"},{default:l(()=>[e(y,{onChange:t[26]||(t[26]=a=>I(a,"sort"))})]),_:1})]),cell:l(({rowIndex:a})=>[e(y,{modelValue:o.value.columns[a].is_sort,"onUpdate:modelValue":n=>o.value.columns[a].is_sort=n},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(x,{dataIndex:"query_type",title:"查询方式",width:150},{cell:l(({rowIndex:a})=>[e(g,{modelValue:o.value.columns[a].query_type,"onUpdate:modelValue":n=>o.value.columns[a].query_type=n,options:qe,"allow-clear":""},null,8,["modelValue","onUpdate:modelValue","options"])]),_:1}),e(x,{dataIndex:"view_type",title:"页面控件",width:220},{cell:l(({record:a,rowIndex:n})=>[e(de,null,{default:l(()=>[e(g,{modelValue:o.value.columns[n].view_type,"onUpdate:modelValue":_=>o.value.columns[n].view_type=_,style:{width:"140px"},options:Ce,"allow-clear":""},null,8,["modelValue","onUpdate:modelValue","options"]),X.value.includes(a.view_type)?(c(),k(H,{key:0,onClick:_=>$.value.open(a)},{default:l(()=>[u("设置")]),_:2},1032,["onClick"])):O("",!0)]),_:2},1024)]),_:1}),e(x,{dataIndex:"dict_type",title:"数据字典",width:160},{cell:l(({record:a,rowIndex:n})=>[e(g,{modelValue:o.value.columns[n].dict_type,"onUpdate:modelValue":_=>o.value.columns[n].dict_type=_,options:W.value,"allow-clear":"","field-names":{label:"name",value:"code"},placeholder:"选择数据字典",disabled:!["saSelect","radio","checkbox"].includes(a.view_type)},null,8,["modelValue","onUpdate:modelValue","options","disabled"])]),_:1})]),_:1},8,["data"])]),_:1}),e(E,{title:"菜单配置",key:"menu_config"},{default:l(()=>[e(B,{title:"提示"},{default:l(()=>[u(" 默认接口根据模型类型为"),e(K,{color:"red"},{default:l(()=>[u("软删除")]),_:1}),u("或者"),e(K,{color:"red"},{default:l(()=>[u("非软删除")]),_:1}),u("自动判断，可选接口根据是否选中进行生成 ")]),_:1}),e(me,{direction:"vertical",modelValue:o.value.generate_menus,"onUpdate:modelValue":t[27]||(t[27]=a=>o.value.generate_menus=a),class:"mt-3","default-value":o.value.generate_menus},{default:l(()=>[(c(!0),q(C,null,T(he,(a,n)=>(c(),k(y,{value:a.value,key:n},{default:l(()=>[u(U(a.name+"　-　"+a.comment),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","default-value"])]),_:1}),e(E,{title:"关联配置",key:"relation_config"},{default:l(()=>[e(B,{title:"提示"},{default:l(()=>[u("模型关联支持：一对一、一对多、一对一（反向）、多对多。")]),_:1}),e(re,{onClick:ae,type:"primary",class:"mt-3"},{default:l(()=>[e(ie),u(" 新增关联")]),_:1}),(c(!0),q(C,null,T(f.value.relations,(a,n)=>(c(),q("div",{key:n},[e(b,{orientation:"left"},{default:l(()=>[u(U(a.name?a.name:"定义新关联")+" ",1),e(H,{onClick:_=>te(n),class:"ml-5"},{default:l(()=>[e(_e),u(" 删除定义")]),_:2},1032,["onClick"])]),_:2},1024),e(V,{gutter:24},{default:l(()=>[e(m,{xs:24,md:12,xl:12},{default:l(()=>[e(s,{label:"关联类型",field:"type","label-col-flex":"auto","label-col-style":{width:"100px"},extra:"指定关联类型"},{default:l(()=>[e(g,{modelValue:a.type,"onUpdate:modelValue":_=>a.type=_,"allow-clear":"","allow-search":"",placeholder:"请选择关联类型"},{default:l(()=>[(c(!0),q(C,null,T(ke,_=>(c(),k(N,{key:_.value,value:_.value,label:_.name},null,8,["value","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(m,{xs:24,md:12,xl:12},{default:l(()=>[e(s,{label:"关联名称",field:"name","label-col-flex":"auto","label-col-style":{width:"100px"},extra:"设置关联名称，且是代码中调用的名称"},{default:l(()=>[e(r,{modelValue:a.name,"onUpdate:modelValue":_=>a.name=_,"allow-clear":"",placeholder:"设置关联名称"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024),e(V,{gutter:24},{default:l(()=>[e(m,{xs:24,md:12,xl:12},{default:l(()=>[e(s,{label:"关联模型",field:"model","label-col-flex":"auto","label-col-style":{width:"100px"},extra:"选择要关联的模型"},{default:l(()=>[e(r,{modelValue:a.model,"onUpdate:modelValue":_=>a.model=_,"allow-clear":"",placeholder:"设置关联模型"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(m,{xs:24,md:12,xl:12},{default:l(()=>[e(s,{label:a.type==="belongsTo"||a.type==="belongsToMany"?"外键":"当前模型主键",field:"localKey","label-col-flex":"auto","label-col-style":{width:"100px"},extra:a.type==="belongsTo"||a.type==="belongsToMany"?"关联模型_id":"当前模型主键"},{default:l(()=>[e(r,{modelValue:a.localKey,"onUpdate:modelValue":_=>a.localKey=_,"allow-clear":"",placeholder:"设置键名"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label","extra"])]),_:2},1024)]),_:2},1024),e(V,{gutter:24},{default:l(()=>[xe(e(m,{xs:24,md:12,xl:12},{default:l(()=>[e(s,{label:"中间模型",field:"model","label-col-flex":"auto","label-col-style":{width:"100px"},extra:"多对多关联的中间模型"},{default:l(()=>[e(r,{modelValue:a.table,"onUpdate:modelValue":_=>a.table=_,"allow-clear":"",placeholder:"请输入中间模型"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1536),[[Ve,a.type==="belongsToMany"]]),e(m,{xs:24,md:12,xl:12},{default:l(()=>[e(s,{label:a.type==="belongsTo"?"关联主键":"外键",field:"foreignKey","label-col-flex":"auto","label-col-style":{width:"100px"},extra:a.type==="belongsTo"?"关联模型主键":"当前模型_id"},{default:l(()=>[e(r,{style:{width:"100%"},modelValue:a.foreignKey,"onUpdate:modelValue":_=>a.foreignKey=_,"allow-clear":"",placeholder:"设置键名"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label","extra"])]),_:2},1024)]),_:2},1024)]))),128))]),_:1})]),_:1},8,["active-key"])]),_:1},8,["model"])]),_:1},8,["loading"]),e(Ue,{ref_key:"settingComponentRef",ref:$,onConfrim:ee},null,512)]),_:1},8,["visible"])}}}),Ae=be(Ee,[["__scopeId","data-v-4bea677d"]]);export{Ae as default};
