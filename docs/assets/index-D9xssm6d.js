import{d as i}from"./dict-DHz__nwp.js";import P from"./edit-BwhJxAbD.js";import E from"./dataList-ujjPrS2S.js";import{k as p,fs as N,S as V,M as f,A as j,r as l,fu as J,o as m,c as x,d as s,J as W,e as C,w as n,L as q,h as b,f as S,t as T}from"./index-oR0mlNqp.js";import"./edit-data-BKrGWP8k.js";const z={class:"ma-content-block lg:flex justify-between"},G={key:1},Z={__name:"index",setup(H){const c=p(),y=p(),r=p(),u=p({name:"",code:"",status:""});let v=N(()=>c.value?c.value.isRecovery:!1);const D=async(e,o)=>{const t=await i.changeStatus({id:o,status:e});t.code===200&&(f.success(t.message),c.value.refresh())},w=async e=>{y.value.open(e)},R=V({api:i.getPageList,recycleApi:i.getRecyclePageList,rowSelection:{showCheckedAll:!0},operationColumnWidth:240,add:{show:!0,auth:["/core/dictType/save"],func:async()=>{var e;(e=r.value)==null||e.open()}},edit:{show:!0,auth:["/core/dictType/update"],func:async e=>{var o,t;(o=r.value)==null||o.open("edit"),(t=r.value)==null||t.setFormData(e)}},delete:{show:!0,auth:["/core/dictType/destroy"],func:async e=>{var t;(await i.delete(e)).code===200&&(f.success("删除成功！"),(t=c.value)==null||t.refresh())},realAuth:["/core/dictType/realDestroy"],realFunc:async e=>{var t;(await i.realDestroy(e)).code===200&&(f.success("销毁成功！"),(t=c.value)==null||t.refresh())}},recovery:{show:!0,auth:["/core/dictType/recovery"],func:async e=>{var t;(await i.recovery(e)).code===200&&(f.success("恢复成功！"),(t=c.value)==null||t.refresh())}}}),F=V([{title:"字典名称",dataIndex:"name",width:220,align:"left"},{title:"字典标识",dataIndex:"code",width:260,align:"left"},{title:"状态",dataIndex:"status",dict:"data_status",width:180},{title:"创建时间",dataIndex:"create_time",width:180}]),U=async()=>{},k=async()=>{var e;(e=c.value)==null||e.refresh()};return j(async()=>{U(),k()}),(e,o)=>{const t=l("a-input"),_=l("a-form-item"),h=l("a-col"),A=l("sa-select"),g=l("a-link"),B=l("a-tooltip"),I=l("sa-switch"),L=l("icon-list"),$=l("sa-table"),M=J("auth");return m(),x("div",z,[s($,{ref_key:"crudRef",ref:c,options:R,columns:F,searchForm:u.value},W({tableSearch:n(()=>[s(h,{span:8},{default:n(()=>[s(_,{field:"name",label:"名称"},{default:n(()=>[s(t,{modelValue:u.value.name,"onUpdate:modelValue":o[0]||(o[0]=a=>u.value.name=a),placeholder:"请输入名称"},null,8,["modelValue"])]),_:1})]),_:1}),s(h,{span:8},{default:n(()=>[s(_,{field:"code",label:"标志"},{default:n(()=>[s(t,{modelValue:u.value.code,"onUpdate:modelValue":o[1]||(o[1]=a=>u.value.code=a),placeholder:"请输入标志"},null,8,["modelValue"])]),_:1})]),_:1}),s(h,{span:8},{default:n(()=>[s(_,{field:"status",label:"状态"},{default:n(()=>[s(A,{modelValue:u.value.status,"onUpdate:modelValue":o[2]||(o[2]=a=>u.value.status=a),dict:"data_status",placeholder:"请选择状态"},null,8,["modelValue"])]),_:1})]),_:1})]),code:n(({record:a})=>[C(v)?(m(),x("span",G,T(a.code),1)):(m(),b(B,{key:0,content:"点击查看字典数据"},{default:n(()=>[s(g,{onClick:d=>w(a)},{default:n(()=>[S(T(a.code),1)]),_:2},1032,["onClick"])]),_:2},1024))]),status:n(({record:a})=>[s(I,{modelValue:a.status,"onUpdate:modelValue":d=>a.status=d,onChange:d=>D(d,a.id)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:2},[C(v)?void 0:{name:"operationBeforeExtend",fn:n(({record:a})=>[q((m(),b(g,{onClick:d=>w(a)},{default:n(()=>[s(L),S(" 字典数据")]),_:2},1032,["onClick"])),[[M,["/core/dictType/save"]]])]),key:"0"}]),1032,["options","columns","searchForm"]),s(P,{ref_key:"editRef",ref:r,onSuccess:k},null,512),s(E,{ref_key:"datalist",ref:y},null,512)])}}};export{Z as default};
