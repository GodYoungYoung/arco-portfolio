import{c as v}from"./config-DGlCJYQb.js";import{k as m,S as B,r,o as q,h as D,w as u,d as s,M as F}from"./index-oR0mlNqp.js";const N={__name:"add-group",emits:["success"],setup(G,{expose:_,emit:g}){const i=m(!1),f=m(!1),c=m(""),p=m(),k=g,b=(o="add")=>{c.value=o,i.value=!0,p.value.resetFields()},a=B({id:"",name:"",code:"",remark:""}),V={name:[{required:!0,message:"组名称不能为空"}],code:[{required:!0,message:"组标识不能为空"}]},w=async o=>{for(const e in a)o[e]!=null&&o[e]!=null&&(a[e]=o[e])},x=async o=>{var n;if(!await((n=p.value)==null?void 0:n.validate())){f.value=!0;let l={...a},d={};c.value==="add"?(l.id=void 0,d=await v.saveConfigGroup(l)):d=await v.updateConfigGroup(l.id,l),d.code===200&&(F.success("操作成功"),k("success"),o(!0)),setTimeout(()=>{f.value=!1},500)}o(!1)},C=()=>i.value=!1;return _({open:b,setFormData:w}),(o,e)=>{const n=r("a-input"),l=r("a-form-item"),d=r("a-textarea"),y=r("a-form"),U=r("a-modal");return q(),D(U,{visible:i.value,"onUpdate:visible":e[3]||(e[3]=t=>i.value=t),title:"配置组"+(c.value=="add"?"-新增":"-编辑"),draggable:"",width:"600px","ok-loading":f.value,onCancel:C,onBeforeOk:x},{default:u(()=>[s(y,{ref_key:"formRef",ref:p,model:a,rules:V,"auto-label-width":!0},{default:u(()=>[s(l,{label:"组名称（中文）",field:"name"},{default:u(()=>[s(n,{modelValue:a.name,"onUpdate:modelValue":e[0]||(e[0]=t=>a.name=t),placeholder:"请输入组名称"},null,8,["modelValue"])]),_:1}),s(l,{label:"组标识（英文）",field:"code"},{default:u(()=>[s(n,{modelValue:a.code,"onUpdate:modelValue":e[1]||(e[1]=t=>a.code=t),placeholder:"请输入组标识"},null,8,["modelValue"])]),_:1}),s(l,{label:"备注",field:"remark"},{default:u(()=>[s(d,{modelValue:a.remark,"onUpdate:modelValue":e[2]||(e[2]=t=>a.remark=t),placeholder:"请输入备注"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","title","ok-loading"])}}};export{N as default};
