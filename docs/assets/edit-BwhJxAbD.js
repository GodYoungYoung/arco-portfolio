import{d as v}from"./dict-DHz__nwp.js";import{k as m,fs as q,S as F,r as i,o as M,h as R,w as d,d as s,e as T,K,M as N}from"./index-oR0mlNqp.js";const j={__name:"edit",emits:["success"],setup(O,{expose:_,emit:k}){const V=k,f=m(),c=m(""),r=m(!1),p=m(!1);let b=q(()=>"数据字典"+(c.value=="add"?"-新增":"-编辑"));const a=F({id:"",name:"",code:"",status:1,remark:""}),w={name:[{required:!0,message:"字典名称不能为空"}],code:[{required:!0,message:"字典标识不能为空"}]},y=async(l="add")=>{c.value=l,r.value=!0,f.value.resetFields(),await g()},g=async()=>{},x=async l=>{for(const e in a)l[e]!=null&&l[e]!=null&&(a[e]=l[e])},U=async l=>{var n;if(!await((n=f.value)==null?void 0:n.validate())){p.value=!0;let t={...a},u={};c.value==="add"?(t.id=void 0,u=await v.save(t)):u=await v.update(t.id,t),u.code===200&&(N.success("操作成功"),V("success"),l(!0)),setTimeout(()=>{p.value=!1},500)}l(!1)},C=()=>r.value=!1;return _({open:y,setFormData:x}),(l,e)=>{const n=i("a-input"),t=i("a-form-item"),u=i("sa-radio"),B=i("a-textarea"),D=i("a-form");return M(),R(K("a-modal"),{visible:r.value,"onUpdate:visible":e[4]||(e[4]=o=>r.value=o),width:600,title:T(b),"mask-closable":!1,"ok-loading":p.value,onCancel:C,onBeforeOk:U},{default:d(()=>[s(D,{ref_key:"formRef",ref:f,model:a,rules:w,"auto-label-width":!0},{default:d(()=>[s(t,{label:"字典名称",field:"name"},{default:d(()=>[s(n,{modelValue:a.name,"onUpdate:modelValue":e[0]||(e[0]=o=>a.name=o),placeholder:"请输入字典名称"},null,8,["modelValue"])]),_:1}),s(t,{label:"字典标识",field:"code"},{default:d(()=>[s(n,{modelValue:a.code,"onUpdate:modelValue":e[1]||(e[1]=o=>a.code=o),placeholder:"请输入字典标识"},null,8,["modelValue"])]),_:1}),s(t,{label:"状态",field:"status"},{default:d(()=>[s(u,{modelValue:a.status,"onUpdate:modelValue":e[2]||(e[2]=o=>a.status=o),dict:"data_status",placeholder:"请选择状态"},null,8,["modelValue"])]),_:1}),s(t,{label:"备注",field:"remark"},{default:d(()=>[s(B,{modelValue:a.remark,"onUpdate:modelValue":e[3]||(e[3]=o=>a.remark=o),placeholder:"请输入备注"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},40,["visible","title","ok-loading"])}}};export{j as default};
