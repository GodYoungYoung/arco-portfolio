import{a as _}from"./dict-DHz__nwp.js";import F from"./edit-data-BKrGWP8k.js";import{k as i,S as h,M as y,r as u,o as I,c as R,d as a,w as n,f as T,t as B}from"./index-oR0mlNqp.js";const E={__name:"dataList",setup(L,{expose:b}){const d=i(),c=i(),r=i(!1),v=i({}),l=i({code:"",type_id:null,label:"",value:"",status:"",orderBy:"sort",orderType:"desc"}),w=async(t,e)=>{const s=await _.changeStatus({id:e,status:t});s.code===200&&(y.success(s.message),d.value.refresh())},V=t=>{var e;v.value=t,l.value.code=t.code,l.value.type_id=t.id,(e=d.value)==null||e.refresh(),r.value=!0},g=h({api:_.getPageList,rowSelection:{showCheckedAll:!0},singleLine:!0,add:{show:!0,auth:["/core/dictType/save"],func:async()=>{var t,e;(t=c.value)==null||t.open(),(e=c.value)==null||e.setFormData({type_id:l.value.type_id,code:l.value.code})}},edit:{show:!0,auth:["/core/dictType/update"],func:async t=>{var e,s;(e=c.value)==null||e.open("edit"),(s=c.value)==null||s.setFormData(t)}},delete:{show:!0,auth:["/core/dictType/destroy"],func:async t=>{var s;(await _.deletesDictData(t)).code===200&&(y.success("删除成功！"),(s=d.value)==null||s.refresh())}}}),x=h([{title:"字典标签",dataIndex:"label",width:220},{title:"字典键值",dataIndex:"value",width:220},{title:"排序",dataIndex:"sort",width:180},{title:"状态",dataIndex:"status",dict:"data_status",width:180},{title:"创建时间",dataIndex:"create_time",width:180}]),S=async()=>{var t;(t=d.value)==null||t.refresh()};return b({open:V}),(t,e)=>{const s=u("a-input"),p=u("a-form-item"),m=u("a-col"),k=u("sa-select"),U=u("sa-switch"),C=u("sa-table"),D=u("a-modal");return I(),R("div",null,[a(D,{visible:r.value,"onUpdate:visible":e[3]||(e[3]=o=>r.value=o),fullscreen:"",footer:!1},{title:n(()=>[T("维护 "+B(v.value.name)+" 字典数据",1)]),default:n(()=>[a(C,{ref_key:"crudRef",ref:d,options:g,columns:x,searchForm:l.value},{tableSearch:n(()=>[a(m,{span:8},{default:n(()=>[a(p,{field:"label",label:"字典标签"},{default:n(()=>[a(s,{modelValue:l.value.label,"onUpdate:modelValue":e[0]||(e[0]=o=>l.value.label=o),placeholder:"请输入字典标签"},null,8,["modelValue"])]),_:1})]),_:1}),a(m,{span:8},{default:n(()=>[a(p,{field:"value",label:"字典键值"},{default:n(()=>[a(s,{modelValue:l.value.value,"onUpdate:modelValue":e[1]||(e[1]=o=>l.value.value=o),placeholder:"请输入字典键值"},null,8,["modelValue"])]),_:1})]),_:1}),a(m,{span:8},{default:n(()=>[a(p,{field:"status",label:"状态"},{default:n(()=>[a(k,{modelValue:l.value.status,"onUpdate:modelValue":e[2]||(e[2]=o=>l.value.status=o),dict:"data_status",placeholder:"请选择状态"},null,8,["modelValue"])]),_:1})]),_:1})]),status:n(({record:o})=>[a(U,{modelValue:o.status,"onUpdate:modelValue":f=>o.status=f,onChange:f=>w(f,o.id)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1},8,["options","columns","searchForm"])]),_:1},8,["visible"]),a(F,{ref_key:"editRef",ref:c,onSuccess:S},null,512)])}}};export{E as default};
