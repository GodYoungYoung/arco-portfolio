import{c as _}from"./config-DGlCJYQb.js";import I from"./edit-DS3qt2sz.js";import{k as c,S as v,M as F,r as d,o as B,h as R,w as l,f as S,l as N,d as a}from"./index-oR0mlNqp.js";const U={class:"h-full"},A={__name:"manage-config",emits:["close"],setup(D,{expose:h,emit:y}){const g=y,u=c(!1),i=c(),s=c(),o=c({name:"",key:"",group_id:"",orderBy:"sort",orderType:"desc"}),w=()=>{u.value=!1},m=async()=>{var t;(t=i.value)==null||t.refresh(),g("close")},k=t=>{var e;o.value.group_id=t,u.value=!0,(e=i.value)==null||e.refresh()},x=v({api:_.getConfigList,rowSelection:{showCheckedAll:!0},singleLine:!0,add:{show:!0,auth:["/core/config/save"],func:async()=>{var t,e;(t=s.value)==null||t.open(),(e=s.value)==null||e.setFormData({group_id:o.value.group_id})}},edit:{show:!0,auth:["/core/config/update"],func:async t=>{var e,n;(e=s.value)==null||e.open("edit"),(n=s.value)==null||n.setFormData(t)}},delete:{show:!0,auth:["/core/config/destroy"],func:async t=>{(await _.delete(t)).code===200&&(F.success("删除成功！"),m())}}}),b=v([{title:"配置标题",dataIndex:"name",width:220},{title:"配置标识",dataIndex:"key",width:180},{title:"配置值",dataIndex:"value",width:200},{title:"排序",dataIndex:"sort",width:200},{title:"输入组件",dataIndex:"input_type",width:180},{title:"配置说明",dataIndex:"remark",width:180}]);return h({open:k}),(t,e)=>{const n=d("a-input"),f=d("a-form-item"),p=d("a-col"),V=d("sa-table"),C=d("a-modal");return B(),R(C,{fullscreen:"",visible:u.value,"onUpdate:visible":e[2]||(e[2]=r=>u.value=r),footer:!1,onClose:w},{title:l(()=>[S("管理配置")]),default:l(()=>[N("div",U,[a(V,{ref_key:"crudRef",ref:i,options:x,columns:b,searchForm:o.value},{tableSearch:l(()=>[a(p,{span:12},{default:l(()=>[a(f,{field:"name",label:"配置标题"},{default:l(()=>[a(n,{modelValue:o.value.name,"onUpdate:modelValue":e[0]||(e[0]=r=>o.value.name=r),placeholder:"请输入配置标题"},null,8,["modelValue"])]),_:1})]),_:1}),a(p,{span:12},{default:l(()=>[a(f,{field:"key",label:"配置标识"},{default:l(()=>[a(n,{modelValue:o.value.key,"onUpdate:modelValue":e[1]||(e[1]=r=>o.value.key=r),placeholder:"请输入配置标识"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["options","columns","searchForm"]),a(I,{ref_key:"editRef",ref:s,onSuccess:m},null,512)])]),_:1},8,["visible"])}}};export{A as default};
