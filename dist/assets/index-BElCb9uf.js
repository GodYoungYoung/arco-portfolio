import B from"./edit-CYKCSWdq.js";import M from"./leader-BU_nU-JF.js";import{a as d}from"./dept-Dz9w8F50.js";import{k as u,fs as S,S as y,M as p,A as D,r as c,o as m,c as k,d as o,w as n,i as w,e as E,h as L,f as N}from"./index-oR0mlNqp.js";const P={class:"ma-content-block"},$={key:0},G={__name:"index",setup(U){const r=u(),i=u(),_=u(),x=e=>{_.value.open(e)},l=u({name:"",create_time:[]});let R=S(()=>r.value?r.value.isRecovery:!1);const V=y({api:d.getPageList,recycleApi:d.getRecyclePageList,rowSelection:{showCheckedAll:!0},isExpand:!0,operationColumnWidth:220,add:{show:!0,auth:["/core/dept/save"],func:async()=>{var e;(e=i.value)==null||e.open()}},edit:{show:!0,auth:["/core/dept/update"],func:async e=>{var a,t;(a=i.value)==null||a.open("edit"),(t=i.value)==null||t.setFormData(e)}},delete:{show:!0,auth:["/core/dept/destroy"],func:async e=>{var t;(await d.delete(e)).code===200&&(p.success("删除成功！"),(t=r.value)==null||t.refresh())},realAuth:["/core/dept/realDestroy"],realFunc:async e=>{var t;(await d.realDestroy(e)).code===200&&(p.success("销毁成功！"),(t=r.value)==null||t.refresh())}},recovery:{show:!0,auth:["/core/dept/recovery"],func:async e=>{var t;(await d.recovery(e)).code===200&&(p.success("恢复成功！"),(t=r.value)==null||t.refresh())}}}),b=y([{title:"部门名称",dataIndex:"name",width:150},{title:"负责人",dataIndex:"leader",width:120},{title:"手机",dataIndex:"phone",width:150},{title:"排序",dataIndex:"sort",width:180},{title:"状态",dataIndex:"status",dict:"data_status",width:120},{title:"创建时间",dataIndex:"create_time",width:180}]),g=async()=>{},f=async()=>{var e;(e=r.value)==null||e.refresh()};return D(async()=>{g(),f()}),(e,a)=>{const t=c("a-input"),h=c("a-form-item"),v=c("a-col"),C=c("a-range-picker"),I=c("icon-user"),F=c("a-link"),A=c("sa-table");return m(),k("div",P,[o(A,{ref_key:"crudRef",ref:r,options:V,columns:b,searchForm:l.value},{tableSearch:n(()=>[o(v,{span:8},{default:n(()=>[o(h,{field:"name",label:"部门名称"},{default:n(()=>[o(t,{modelValue:l.value.name,"onUpdate:modelValue":a[0]||(a[0]=s=>l.value.name=s),placeholder:"请输入部门名称"},null,8,["modelValue"])]),_:1})]),_:1}),o(v,{span:8},{default:n(()=>[o(h,{field:"create_time",label:"时间范围"},{default:n(()=>[o(C,{modelValue:l.value.create_time,"onUpdate:modelValue":a[1]||(a[1]=s=>l.value.create_time=s)},null,8,["modelValue"])]),_:1})]),_:1})]),operationCell:n(({record:s})=>[s.disabled?(m(),k("div",$)):w("",!0)]),operationBeforeExtend:n(({record:s})=>[!s.disabled&&!E(R)?(m(),L(F,{key:0,onClick:T=>x(s)},{default:n(()=>[o(I),N(" 领导列表")]),_:2},1032,["onClick"])):w("",!0)]),_:1},8,["options","columns","searchForm"]),o(B,{ref_key:"editRef",ref:i,onSuccess:f},null,512),o(M,{ref_key:"leaderRef",ref:_},null,512)])}}};export{G as default};
