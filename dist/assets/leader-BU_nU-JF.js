import{a as v}from"./dept-Dz9w8F50.js";import{k as r,S as V,M as g,r as o,o as B,h as C,w as t,f as h,d as a}from"./index-oR0mlNqp.js";const R={__name:"leader",setup(F,{expose:b}){const p=r(!1),c=r(),i=r(),m=r([]),s=r({username:"",nickname:"",dept_id:null,status:""}),x=n=>{var e;i.value=n.id,p.value=!0,s.value.dept_id=i.value,(e=c.value)==null||e.refresh()},k=async()=>{var u;const n=m.value.map(d=>({user_id:d.id,username:d.username}));(await v.addLeader({id:i.value,users:n})).code===200&&(m.value=[],(u=c.value)==null||u.refresh())},w=V({api:v.getLeaderList,height:680,rowSelection:{showCheckedAll:!0},singleLine:!0,delete:{show:!0,auth:["/core/dept/destroy"],func:async n=>{var u;n.id=i.value,(await v.delLeader(n)).code===200&&(g.success("删除成功！"),(u=c.value)==null||u.refresh())}}}),I=V([{title:"用户名",dataIndex:"username"},{title:"用户昵称",dataIndex:"nickname"},{title:"手机",dataIndex:"phone"},{title:"邮箱",dataIndex:"email"},{title:"状态",dataIndex:"status",width:100,dict:"data_status"}]);return b({open:x}),(n,e)=>{const u=o("a-alert"),d=o("a-input"),_=o("a-form-item"),f=o("a-col"),y=o("sa-select"),L=o("sa-user"),S=o("sa-table"),U=o("a-modal");return B(),C(U,{visible:p.value,"onUpdate:visible":e[4]||(e[4]=l=>p.value=l),fullscreen:"",footer:!1},{title:t(()=>[h("部门领导列表")]),default:t(()=>[a(u,null,{default:t(()=>[h("部门的领导人可以跨部门设置")]),_:1}),a(S,{ref_key:"crudRef",ref:c,options:w,columns:I,searchForm:s.value},{tableSearch:t(()=>[a(f,{span:8},{default:t(()=>[a(_,{field:"username",label:"用户名"},{default:t(()=>[a(d,{modelValue:s.value.username,"onUpdate:modelValue":e[0]||(e[0]=l=>s.value.username=l),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1})]),_:1}),a(f,{span:8},{default:t(()=>[a(_,{field:"nickname",label:"用户昵称"},{default:t(()=>[a(d,{modelValue:s.value.nickname,"onUpdate:modelValue":e[1]||(e[1]=l=>s.value.nickname=l),placeholder:"请输入用户昵称"},null,8,["modelValue"])]),_:1})]),_:1}),a(f,{span:8},{default:t(()=>[a(_,{field:"status",label:"状态"},{default:t(()=>[a(y,{modelValue:s.value.status,"onUpdate:modelValue":e[2]||(e[2]=l=>s.value.status=l),dict:"data_status",placeholder:"请选择状态","allow-clear":""},null,8,["modelValue"])]),_:1})]),_:1})]),tableBeforeButtons:t(()=>[a(L,{text:"新增领导",onlyId:!1,isEcho:!1,modelValue:m.value,"onUpdate:modelValue":e[3]||(e[3]=l=>m.value=l),onSuccess:k},null,8,["modelValue"])]),_:1},8,["options","columns","searchForm"])]),_:1},8,["visible"])}}};export{R as default};
