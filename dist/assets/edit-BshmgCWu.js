import{fn as u,k as p,fs as B,S as M,r as d,o as O,h as R,w as n,d as l,e as j,K as F,M as L}from"./index-oR0mlNqp.js";const g={getPageList(t={}){return u({url:"/core/post/index",method:"get",params:t})},getRecyclePageList(t={}){return u({url:"/core/post/recycle",method:"get",params:t})},save(t={}){return u({url:"/core/post/save",method:"post",data:t})},delete(t){return u({url:"/core/post/destroy",method:"delete",data:t})},recovery(t){return u({url:"/core/post/recovery",method:"post",data:t})},realDestroy(t){return u({url:"/core/post/realDestroy",method:"delete",data:t})},update(t,f={}){return u({url:"/core/post/update/"+t,method:"put",data:f})},changeStatus(t={}){return u({url:"/core/post/changeStatus",method:"post",data:t})}},T={__name:"edit",emits:["success"],setup(t,{expose:f,emit:y}){const V=y,_=p(),v=p(""),c=p(!1),b=p(!1);let k=B(()=>"岗位管理"+(v.value=="add"?"-新增":"-编辑"));const a=M({id:"",name:"",code:"",sort:100,status:1,remark:""}),h={name:[{required:!0,message:"岗位名称不能为空"}],code:[{required:!0,message:"岗位标识不能为空"}]},w=async(r="add")=>{v.value=r,c.value=!0,_.value.resetFields(),await x()},x=async()=>{},U=async r=>{for(const e in a)r[e]!=null&&r[e]!=null&&(a[e]=r[e])},D=async r=>{var m;if(!await((m=_.value)==null?void 0:m.validate())){b.value=!0;let s={...a},i={};v.value==="add"?(s.id=void 0,i=await g.save(s)):i=await g.update(s.id,s),i.code===200&&(L.success("操作成功"),V("success"),r(!0)),setTimeout(()=>{b.value=!1},500)}r(!1)},S=()=>c.value=!1;return f({open:w,setFormData:U}),(r,e)=>{const m=d("a-input"),s=d("a-form-item"),i=d("a-input-number"),C=d("sa-radio"),P=d("a-textarea"),q=d("a-form");return O(),R(F("a-modal"),{visible:c.value,"onUpdate:visible":e[5]||(e[5]=o=>c.value=o),width:600,title:j(k),"mask-closable":!1,"ok-loading":b.value,onCancel:S,onBeforeOk:D},{default:n(()=>[l(q,{ref_key:"formRef",ref:_,model:a,rules:h,"auto-label-width":!0},{default:n(()=>[l(s,{label:"岗位名称",field:"name"},{default:n(()=>[l(m,{modelValue:a.name,"onUpdate:modelValue":e[0]||(e[0]=o=>a.name=o),placeholder:"请输入岗位名称"},null,8,["modelValue"])]),_:1}),l(s,{label:"岗位标识",field:"code"},{default:n(()=>[l(m,{modelValue:a.code,"onUpdate:modelValue":e[1]||(e[1]=o=>a.code=o),placeholder:"请输入岗位标识"},null,8,["modelValue"])]),_:1}),l(s,{label:"排序数字",field:"sort"},{default:n(()=>[l(i,{modelValue:a.sort,"onUpdate:modelValue":e[2]||(e[2]=o=>a.sort=o),placeholder:"请输入排序数字"},null,8,["modelValue"])]),_:1}),l(s,{label:"状态",field:"status"},{default:n(()=>[l(C,{modelValue:a.status,"onUpdate:modelValue":e[3]||(e[3]=o=>a.status=o),dict:"data_status",placeholder:"请选择状态"},null,8,["modelValue"])]),_:1}),l(s,{label:"备注",field:"remark"},{default:n(()=>[l(P,{modelValue:a.remark,"onUpdate:modelValue":e[4]||(e[4]=o=>a.remark=o),placeholder:"请输入备注"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},40,["visible","title","ok-loading"])}}},K=Object.freeze(Object.defineProperty({__proto__:null,default:T},Symbol.toStringTag,{value:"Module"}));export{T as _,g as a,K as e};
